$(document).ready(function(){var a={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows())}};window.disqus_shortname="alfredsun";$("#comments_container .comment").on("click",function(){if(!$(this).hasClass("actived")){if($("#comments_container .comment_").hasClass("actived")){$(".ds-thread").addClass("hideDivElement");$("#comments_container .comment_").removeClass("actived")}$(this).addClass("actived");if($("#disqus_thread").hasClass("hideDivElement")){$("#disqus_thread").removeClass("hideDivElement")}else{$(this).html("Loading...");var b=this;$.getScript("http://"+disqus_shortname+".disqus.com/embed.js",function(){window.setTimeout(function(){$(b).html("Disqus")},1000)})}}else{$("#disqus_thread").addClass("hideDivElement");$(this).removeClass("actived")}});window.duoshuoQuery={short_name:"alfredsun"};$("#comments_container .comment_").on("click",function(){if(!$(this).hasClass("actived")){if($("#comments_container .comment").hasClass("actived")){$("#disqus_thread").addClass("hideDivElement");$("#comments_container .comment").removeClass("actived")}$(this).addClass("actived");if($(".ds-thread").hasClass("hideDivElement")){$(".ds-thread").removeClass("hideDivElement")}else{$(this).html("Loading...");var b=this;$.getScript("http://static.duoshuo.com/embed.js",function(){window.setTimeout(function(){$(b).html("Duoshuo")},500)})}}else{$(".ds-thread").addClass("hideDivElement");$(this).removeClass("actived")}});$(".entry a").each(function(c,d){var b=$(this).attr("href");if(b){if(b.indexOf("#")==0){}else{if(b.indexOf("/")==0||b.toLowerCase().indexOf("alfred-sun.github.io")>-1){}else{if($(d).has("img").length){$(this).attr("target","_blank")}else{$(this).attr("target","_blank");$(this).addClass("external")}}}}});(function(){var c=(/msie/.test(navigator.userAgent.toLowerCase())&&"undefined"==typeof(document.body.style.maxHeight))?true:false;function f(){var h=[];var g=[];var i=0;$.each($(".entry h2, .entry h3"),function(k,m){if(m.tagName.toLowerCase()=="h2"){var l={};l.name=$(m).text();l.id="menuIndex"+k;h.push(l);i++}else{var j={};j.name=$(m).text();j.id="menuIndex"+k;if(!g[i-1]){g[i-1]=[]}g[i-1].push(j)}m.id="menuIndex"+k});return{h2:h,h3:g}}function d(){var n=$("h1").text();var h='<ul><li class="h1"><a href="#">'+n+"</a></li>";var o=f();var l=o.h2;var g=o.h3;for(var m=0;m<l.length;m++){h+='<li><a href="#" data-id="'+l[m].id+'">'+l[m].name+"</a></li>";if(g[m]){for(var k=0;k<g[m].length;k++){h+='<li class="h3"><a href="#" data-id="'+g[m][k].id+'">'+g[m][k].name+"</a></li>"}}}h+="</ul>";return h}function e(){var g=d();var h='<div id="menuIndex" class="sidenav"></div>';$("#content").append(h);$("#menuIndex").append($(g)).delegate("a","click",function(k){k.preventDefault();var i=$(this).attr("data-id")?"#"+$(this).attr("data-id"):"h1";var j=$(i).offset().top;$("body, html").animate({scrollTop:j-20},400,"swing")})}var b=(function(){var g={};return function(j,h,i){if(!i){i="Don't call this twice without a uniqueId"}if(g[i]){clearTimeout(g[i])}g[i]=setTimeout(j,h)}})();if($(".entry h2").length>1&&!a.any()&&!c){e();$(window).load(function(){var h=[];$.each($("#menuIndex li a"),function(k,l){var j=$(l).attr("data-id")?"#"+$(l).attr("data-id"):"h1";var m=$(j).offset().top;h.push(m)});var i=$("#menuIndex").offset().top;var g=$("#menuIndex").offset().left;$(window).scroll(function(){b(function(){var m=$(window).scrollTop();var l=h.length;var j;if(m+20>i){$("#menuIndex").css({position:"fixed",top:"20px",left:g})}else{$("#menuIndex").css({position:"static",top:0,left:0})}if(m+60>h[l-1]){j=l}else{for(var k=0;k<l;k++){if(m+60<=h[k]){j=k;break}}}$("#menuIndex li").removeClass("on");$("#menuIndex li").eq(j-1).addClass("on")})});$(window).resize(function(){$("#menuIndex").css({position:"static",top:0,left:0});i=$("#menuIndex").offset().top;g=$("#menuIndex").offset().left;$(window).trigger("scroll");$("#menuIndex").css("max-height",$(window).height()-80)});$(window).trigger("scroll")});$("#menuIndex").css("max-height",$(window).height()-80)}})();if(/\#comment/.test(location.hash)){$("#comments_container .comment").trigger("click")}if(/css3-animation/.test(location.href)){$("head").append("<link rel='stylesheet' type='text/css' href='/assets/stylesheets/css3-ani.css'/>");$.getScript("/assets/javascripts/css3-ani.js",function(){})}});